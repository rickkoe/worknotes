{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"Network/","title":"Network Notes","text":""},{"location":"Network/#subnet-cheat-sheet","title":"Subnet Cheat Sheet","text":"CIDR Addresses Hosts Netmask Amount of a Class C /30 4 2 255.255.255.252 1/64 /29 8 6 255.255.255.248 1/32 /28 16 14 255.255.255.240 1/16 /27 32 30 255.255.255.224 1/8 /26 64 62 255.255.255.192 1/4 /25 128 126 255.255.255.128 1/2 /24 256 254 255.255.255.0 1 /23 512 510 255.255.254.0 2 /22 1024 1022 255.255.252.0 4 /21 2048 2046 255.255.248.0 8 /20 4096 4094 255.255.240.0 16 /19 8192 8190 255.255.224.0 32 /18 16384 16382 255.255.192.0 64 /17 32768 32766 255.255.128.0 128 /16 65536 65534 255.255.0.0 256"},{"location":"Resources/","title":"General Resources Notes","text":""},{"location":"Resources/#vendor-resources","title":"Vendor Resources","text":"<ul> <li>IBM</li> </ul>"},{"location":"Resources/ibm/","title":"IBM Resources","text":""},{"location":"Resources/ibm/#pre-sales-tools","title":"Pre-Sales Tools","text":"<ul> <li>Announcement Letters</li> <li>Storage Modeler</li> <li>e-Config Cloud</li> <li>Entitled Systems Support (ESS)</li> <li>IBM Fix Central</li> <li>IBM Partnerworld</li> <li>FlashSystem QuickPricer</li> <li>IBM Product Security Central</li> </ul>"},{"location":"Resources/quick-notes/","title":"Rick's Quick Notes","text":""},{"location":"Resources/quick-notes/#idaa","title":"IDAA","text":"<p>https://www.ibm.com/support/pages/node/1126179 https://www.ibm.com/support/pages/prerequisites-and-maintenance-ibm-db2-analytics-accelerator-zos-v7</p> <p>wrkmlbsts</p> <p>WRKTAPCTG</p>"},{"location":"SAN/","title":"SAN Notes","text":"<ul> <li>Brocade</li> <li>Cisco MDS</li> </ul>"},{"location":"SAN/brocade/","title":"Brocade SAN","text":""},{"location":"SAN/brocade/#documentation-links","title":"Documentation Links","text":""},{"location":"SAN/brocade/#support-information","title":"Support Information","text":"<ul> <li>Broadcom Support Portal</li> </ul>"},{"location":"SAN/brocade/#reference-guides","title":"Reference Guides","text":"<ul> <li>Brocade FOS Administration Guide, 9.0.x</li> <li>Brocade FOS Command Reference Manual, 9.0.x</li> </ul>"},{"location":"SAN/brocade/#microcode-guidance","title":"Microcode Guidance","text":"<ul> <li>Brocade Target Path Selection Guide</li> <li>Download Microcode from IBM Fix Central</li> </ul>"},{"location":"SAN/brocade/#implementation","title":"Implementation","text":""},{"location":"SAN/brocade/#health-check","title":"Health Check","text":"<p><pre><code>switchshow\n</code></pre> <pre><code>psshow\n</code></pre></p>"},{"location":"SAN/brocade/#load-firmware-from-usb","title":"Load Firmware From USB","text":"<p>usbstorage -e usbstorage -l firmwaredownload -U v9.2.1_EXT</p>"},{"location":"SAN/brocade/#implementation-checklist","title":"Implementation Checklist","text":"<p>These are the typical items that should be reviewed and/or configured when setting up a new Brocade SAN switch/director. While many of these settings can be set in WebTools, the CLI commands are listed here for a simlper checklist.</p>"},{"location":"SAN/brocade/#user-settings","title":"User Settings","text":"<ul> <li> Enable root access optional</li> </ul> <pre><code>userconfig --change root -e yes ; rootaccess --set all\n</code></pre> <ul> <li> <p> Set root password to pre-defined password (Login as root/fibranne and it will prompt you to change)</p> </li> <li> <p> Set admin password to pre-defined password</p> </li> </ul> <pre><code>passwd\n</code></pre>"},{"location":"SAN/brocade/#name-and-address","title":"Name and Address","text":"<ul> <li> Set the switch name</li> </ul> <pre><code>switchname new_name\n</code></pre> <ul> <li> Set IP address, subnet mask, gateway</li> </ul> <pre><code>ipaddrset\n</code></pre> <ul> <li> Set the Registered Organization Name (Directors Only)</li> </ul> <pre><code>ron --set &lt;customer_name&gt;\n</code></pre>"},{"location":"SAN/brocade/#data-center-settings","title":"Data Center Settings","text":"<ul> <li> Verify Management Port Speed (Default is 1000-auto, but some customers need this set to 100-full)</li> </ul> <pre><code>## If 100-full is required\nethif --set eth0 -an off -speed 100 -duplex full\n\n## Validate\nethif --show eth0\n</code></pre> <ul> <li> Configure timezone</li> </ul> <pre><code>tstimezone America/New_York\ntstimezone America/Chicago\n</code></pre> <ul> <li> <p> Reboot to make new timezone effective (do this before configurating the clock) <pre><code>reboot\n</code></pre></p> </li> <li> <p> Configure clock</p> </li> </ul> <pre><code>date mmddHHMMyy\n</code></pre> <ul> <li> Configure DNS</li> </ul> <pre><code>dnsconfig --add -domain &lt;domain_name&gt; -serverip1 &lt;ip_address_1&gt; -serverip2 &lt;ip_address_2&gt;\n</code></pre> <ul> <li> Configure NTP server</li> </ul> <p><pre><code>tsclockserver \"ntp_server_name\"\n</code></pre> -  Configure SMTP server</p> <pre><code>relayConfig --config -rla_ip &lt;relay IP&gt; -rla_dname &lt;domain name&gt;\n</code></pre> <ul> <li> Configure LDAP (optional)</li> </ul>"},{"location":"SAN/brocade/#licenses","title":"Licenses","text":"<ul> <li> <p> Apply new licenses (POD, etc.)</p> </li> <li> <p> Verify licenses (POD, etc.)</p> </li> </ul> <pre><code>licenseshow\n</code></pre> <ul> <li> Assign static port licenses</li> </ul>"},{"location":"SAN/brocade/#firmware","title":"Firmware","text":"<ul> <li> Update FOS <pre><code>firmwaredownload &lt;ftp_server_ip&gt;,&lt;ftp_userid&gt;,&lt;path_to_firmware&gt;\n</code></pre></li> <li> Configure domain id and set insistent domain ID</li> </ul> <pre><code>switchdisable ; configure\n</code></pre>"},{"location":"SAN/brocade/#zone-config","title":"Zone Config","text":"<ul> <li> Configure default zone policy to No Access</li> </ul> <pre><code>defzone --noaccess ; cfgsave\n</code></pre> <ul> <li> Configure zoning</li> </ul>"},{"location":"SAN/brocade/#optional","title":"Optional","text":"<ul> <li> Persistent disable all ports <pre><code>portcfgpersistentdisable 3/0-47\nportcfgpersistentdisable 4/0-47\nportcfgpersistentdisable 5/0-47\nportcfgpersistentdisable 6/0-47\nportcfgpersistentdisable 9/0-47\nportcfgpersistentdisable 10/0-47\nportcfgpersistentdisable 11/0-47\nportcfgpersistentdisable 12/0-47\n</code></pre></li> </ul>"},{"location":"SAN/brocade/#maps","title":"MAPS","text":"<ul> <li> Enable a policy <pre><code>mapspolicy --show -summary\nmapspolicy --enable dflt_conservative_policy\n</code></pre></li> <li> Verify policy is active <pre><code>mapsconfig --show\nmapsconfig --actions raslog,email\nmapsConfig --emailcfg -address rick.k@evolvingsol.com\nmapsconfig --show\nmapsconfig --testmail -subject \"this is a test\" -message \"test email body\"\n</code></pre></li> </ul>"},{"location":"SAN/brocade/#configuring-security","title":"Configuring Security","text":"<ul> <li>Brocade Security Templates This command will show security setup. <pre><code>seccryptocfg --show\n</code></pre> <pre><code>br6510-fabA-1:FID128:admin&gt; seccryptocfg --show\nSSH Crypto:\nSSH Cipher               : aes128-ctr,aes256-ctr,aes128-gcm@openssh.com,aes256-gcm@openssh.com\nSSH Kex                  : diffie-hellman-group14-sha1,ecdh-sha2-nistp256,ecdh-sha2-nistp384,ecdh-sha2-nistp521\nSSH MAC                  : hmac-sha2-256,hmac-sha2-512\nTLS Ciphers:\nHTTPS                    : !ECDH:!DH:HIGH:-MD5:!CAMELLIA:!SRP:!PSK:!AESGCM:!3DES:!aNULL\nRADIUS                   : !ECDH:!DH:HIGH:-MD5:!CAMELLIA:!SRP:!PSK:!AESGCM:!3DES:!aNULL\nLDAP                     : !ECDH:!DH:HIGH:-MD5:!CAMELLIA:!SRP:!PSK:!AESGCM:!3DES:!aNULL\nSYSLOG                   : !ECDH:!DH:HIGH:-MD5:!CAMELLIA:!SRP:!PSK:!AESGCM:!3DES:!aNULL\nTLS Protocol:\nHTTPS                    : TLSv1.2\nRADIUS                   : TLSv1.2\nLDAP                     : TLSv1.2\nSYSLOG                   : TLSv1.2\nX509v3:\nValidation               : Strict\n</code></pre></li> </ul> <p>To list security templates that are available: <pre><code>seccryptocfg --lstemplates\n</code></pre> To list the contents of a particular template: <pre><code>seccryptocfg --show template_file\n</code></pre> To apply the configurations in a template file: <pre><code>seccryptocfg --apply template_file\n</code></pre></p>"},{"location":"SAN/brocade/#fcip-configuration","title":"FCIP Configuration","text":""},{"location":"SAN/brocade/#resources","title":"Resources","text":"<ul> <li>Brocade\u00ae Fabric OS\u00ae Extension User Guide</li> </ul>"},{"location":"SAN/brocade/#fcip-configuration-steps","title":"FCIP Configuration Steps","text":"<p>Note</p> <p>The steps shown below are the steps followed in a real world implementation of Brocade 7810s with two 10G links. </p>"},{"location":"SAN/brocade/#configure-ge-interfaces","title":"Configure GE Interfaces","text":"<ol> <li>Show the GE Interfaces and make note of speed and WAN or LAN indication.  A flag of L means it is set for LAN (don't want this for FCIP).  No L indicates it is set for WAN (this is correct). <pre><code>portcfgge --show\n</code></pre></li> <li>If needed, set the port for WAN         <pre><code>portcfgge ge6 --set -wan\n</code></pre></li> <li>Set the GE port to 10G         <pre><code>portcfgge ge2 --set -speed 10G\nportcfgge ge3 --set -speed 10G        \n</code></pre></li> <li>Assign IP addresses to the IP interfaces         <pre><code>portcfg ipif ge2 create 10.1.1.10/24 mtu 1500\nportcfg ipif ge3 create 10.1.1.11/24 mtu 1500\n</code></pre></li> <li> <p>If needed, set PMTU for auto MTU size:</p> <pre><code>portcfg ipif ge2.dp0 modify 10.1.1.10/24 mtu auto\nportcfg ipif ge3.dp0 modify 10.1.1.11/24 mtu auto\n</code></pre> </li> <li> <p>Show the IP interfaces         <pre><code>portshow ipif\n</code></pre></p> </li> </ol>"},{"location":"SAN/brocade/#configure-fcip-tunnels","title":"Configure FCIP Tunnels","text":"<ol> <li>Create FCIP tunnel         <pre><code>portcfg fciptunnel 12 create\n</code></pre></li> <li>Enable compression on the tunnel         <pre><code>portcfg fciptunnel 12 modify -c deflate\n</code></pre></li> </ol>"},{"location":"SAN/brocade/#configure-fcip-circuits","title":"Configure FCIP Circuits","text":"<ol> <li>Create circuits (Do on both sides)  <pre><code>portcfg fcipcircuit 12 create 0\nportcfg fcipcircuit 12 create 1\n</code></pre></li> <li>Add circuit IP addresses (Do on both sides)         <pre><code>portcfg fcipcircuit 12 modify 0 --local-ip 10.0.0.5 --remote-ip 192.168.0.5\nportcfg fcipcircuit 12 modify 1 --local-ip 10.0.0.6 --remote-ip 192.168.0.6\n</code></pre></li> <li>Set min and max bandwidth (Do on both sides)         <pre><code>portcfg fcipcircuit 12 modify 0 -b 615000 -B 1230000\nportcfg fcipcircuit 12 modify 1 -b 615000 -B 1230000\n</code></pre></li> </ol>"},{"location":"SAN/brocade/#configure-ipsec-encryption","title":"Configure IPsec Encryption","text":"<ol> <li>Create an IPsec Policy         <pre><code>portcfg ipsec-policy MyPolicyName create --preshared-key Li6a28@yfH@sgT28PNUj\n</code></pre></li> <li>Verify the IPsec policy is correct on all switches <pre><code>portshow ipsec-policy --password\n</code></pre></li> <li>Apply the IPSec Policy to the tunnel         <pre><code>portcfg fciptunnel 12 modify --ipsec MyPolicyName\n</code></pre></li> <li>Verify the IPsec configuration was applied to all circuits correctly <pre><code>portshow ipsec-policy --ike\n</code></pre></li> </ol>"},{"location":"SAN/brocade/#validation-commands","title":"Validation Commands","text":"<ul> <li>Show the IP Interfaces         <pre><code>portshow ipif\n</code></pre></li> <li>Show the FCIP Tunnel status along with circuits         <pre><code>portshow fciptunnel -c\n</code></pre></li> </ul>"},{"location":"SAN/brocade/#brocade-san-switch-licenses","title":"Brocade SAN Switch Licenses","text":"<p>In order to activate a license, you must have a Transaction Key for each license to be activated along with the License ID (LID) of the appropriate switch.</p>"},{"location":"SAN/brocade/#obtaining-the-transaction-key","title":"Obtaining the Transaction Key","text":"<p>A Transaction key is unique key, along with the LID, used to generate a software license from the Broadcom licensing portal. The transaction key is issued when a license is purchased. The transaction key is delivered in one of two methods:</p> <ul> <li>Paperpack \u2013 The transaction key is printed and delivered within a POD Optic Hardware Kit. </li> <li>E-license \u2013 The transaction key is contained in an email that is sent instantly to the customer after the sales order is created. The customer is sent the email message within a few minutes after the sales order is submitted, although the timing will vary depending on the network, internet connection, and so on. </li> </ul>"},{"location":"SAN/brocade/#obtaining-the-license-id","title":"Obtaining the License ID","text":"<p>You must have a license ID to generate the license file in the Broadcom licensing portal. Obtain the license ID of the switch or chassis using the CLI method:</p> <ol> <li>Connect to the switch, and log in using an account with admin permissions. </li> <li>Enter the following command to display the license ID of the switch: <pre><code>license --show -lid\n</code></pre></li> </ol>"},{"location":"SAN/brocade/#generating-a-license-key","title":"Generating a License Key","text":"<p>Use the following procedure to generate and obtain a FOS license key. </p> <ol> <li>Go to https://www.broadcom.com, and then select the LOGIN drop-down at the top-right of the web page. </li> <li>Click LOGIN or REGISTER. Once logged in, you will be redirected to the Broadcom support portal. </li> <li>Click Brocade Products. You will be redirected to the Brocade Products page. </li> <li>Click Licensing. You will be redirected to the Broadcom Licensing Portal page. </li> <li>Enter the transaction key. Click Next to continue.  <p>Re-host keys are generated only by the SANnav application and are used only on SANnav.  {.is-info}</p> </li> <li>Enter the license ID (LID) that you obtained earlier in the Unit Information field. Click Next to continue. </li> <li>Read the Broadcom End User License Agreement, and if you agree to the terms, select the I have read and accept checkbox. </li> <li>Click Generate to generate the license. </li> <li>The license key will be sent by email and can also be downloaded by selecting the blue license hyperlink from the Broadcom licensing portal UI. </li> <li>If a license string is generated, save it to your local folder for future reference. </li> <li>If an XML certificate file is generated, save it to the remote server, where it will be retrieved for installing the license. </li> </ol>"},{"location":"SAN/brocade/#installing-the-license-using-a-license-string","title":"Installing the License Using a License String","text":"<p>For Brocade Gen 6 switches and directors, you must pass the license key in the license --install command to install the licenses.</p> <ol> <li>Connect to the switch, and log in using an account with admin permissions. </li> <li>Activate the license using the license --install -key  command.  <pre><code>license --install -key HP9ttZNSgmB4MCD3NmNWgQDWtAKBFtXtBSFJF\n</code></pre> <li>Verify that the license was installed by entering the license --show command. The licensed features that are currently installed on the switch are listed. If the feature is not listed, use the license --install command to install the license.  <pre><code>license --show\n</code></pre></li>"},{"location":"SAN/brocade/#displaying-port-license-assignments","title":"Displaying Port License Assignments","text":"<p>When you display the available licenses, you can also view the current port assignment of those licenses.  Use the following procedure to display the port license assignments.</p> <ol> <li>Connect to the switch, and log in using an account with admin permissions. </li> <li>Enter the license --show -port command to view how port licenses are currently assigned. <pre><code>license --show -port\n</code></pre></li> </ol>"},{"location":"SAN/brocade/#static-port-assignment","title":"Static Port Assignment","text":"<p>When Dynamic Ports On Demand (DPOD) is enabled, ports are licensed from a pool of available licenses based on the server blade or switch installation.  Each port that is enabled will secure a license on a first-come, first-served basis.  If you would like to statically assign port licenses, use the following command.  Example below would reserve licenses on the first 16 ports in a switch. <pre><code>license --reserve -port 0-15\n</code></pre></p> <p>Use the command in the previous section to display the port licenses after making the static assignment to ensure they were properly assigned.</p>"},{"location":"SAN/brocade/#san-discovery","title":"SAN Discovery","text":""},{"location":"SAN/brocade/#brocade-san-health","title":"Brocade SAN Health","text":"<p>This tool is free of charge to anyone with a Broadcom.com account.</p> <ol> <li>Download and Install the Free Tool Go to this URL and follow the steps to download and install Brocade SAN Health Diagnostic Capture: Download Brocade SAN Health Diagnostics Capture</li> <li>Before running, turn on automatic upload by clicking the Options button. </li> <li>Check the box to Automatically send the BSH file to the report generation queue on audit completion. </li> <li>Click Done.</li> <li>Click the New button to generate a new audit file.  This only needs to be done the first time setting up SAN Health.  Future runs can be done by opening a saved audit file. </li> <li>Complete all 5 tabs in the SAN Health Audit.  Include Rick Koetter - rick.k@evolvingsol.com or other partners as desired in the Optional Additional Recipients fields. </li> <li>Be sure to include all fabrics.  There is no good reason to run this multiple times for different fabrics.  All fabrics can be included in a single SAN Health report.</li> <li>Before starting the capture, click on the Save button to save the audit so you can run this report easily with a few clicks in the future.</li> <li>Start the Audit on the Capture tab after all other tabs are complete and all fabrics have been discovered successfully.  The file will upload automatically after all data is completed. </li> <li>It may take up to several hours for the report to be generated.  When it is ready for download, you will receive notification by email.  You will be instructed to download the report from https://support.broadcom.com. Your consultant will also receive a copy of the report if you entered their email in the Optional Additional Recipients field.</li> </ol>"},{"location":"SAN/brocade/#generate-csr","title":"Generate CSR","text":"<p><pre><code>seccertmgmt generate -csr https  -type rsa -keysize 2048 -hash sha256 -years 1 -f\n</code></pre> <pre><code>seccertmgmt show -csr https -hexdump\n</code></pre></p>"},{"location":"SAN/cisco-mds/","title":"Cisco MDS SAN","text":""},{"location":"SAN/cisco-mds/#implementation","title":"Implementation","text":"<ul> <li>Cisco Configuration Guides</li> </ul>"},{"location":"SAN/cisco-mds/#procedures","title":"Procedures","text":"<ul> <li>Procedure to collect show tech-support logs</li> </ul>"},{"location":"SAN/cisco-mds/#implementation-checklist","title":"Implementation Checklist","text":"<p>Enter configuration mode:  </p> <pre><code>config t\n</code></pre> <p>Rename a device-alias:</p> <pre><code>device-alias database\ndevice-alias rename {old_name} {new_name}\ndevice-alias commit\n</code></pre> <p>Save configuration changes</p> <pre><code>copy run start\n</code></pre> <p>Displaying power usage information</p> <pre><code>show environment power\n</code></pre> <p>Configuring the Power Supply Mode</p> <pre><code>configure terminal\npower redundancy-mode {combined | insrc-redundant | ps-redundant |redundant}\n(Optional) show environment power\n(Optional) copy running-config startup-config\n</code></pre> <p>Power Cycling Modules Step 1 Identify the module that needs to be reset.</p> <p>Step 2 Issue the reload module command to reset the identified module. This command power cycles the selected module. Caution    Reloading a module disrupts traffic through the module.</p> <pre><code>reload module 2\n</code></pre>"},{"location":"SAN/cisco-mds/#microcode-guidance","title":"Microcode Guidance","text":"<ul> <li>Download Microcode from IBM Fix Central</li> </ul>"},{"location":"SAN/cisco-mds/#fcip-configuration","title":"FCIP Configuration","text":"<p>https://www.cisco.com/c/en/us/td/docs/switches/datacenter/mds9000/sw/8_x/config/ip_services/ipsvc/cfcip.html#74650 https://thinksystem.lenovofiles.com/storage/help/index.jsp?topic=%2FMCC_Fabric-attached_MetroCluster_Installation_and_Configuration_Guide%2F5A8EEA1A-F3FA-4570-902C-2BF420654A60_.html</p> <ol> <li>Enable the FCIP Feature</li> </ol> <pre><code>config t\nfeature fcip\n</code></pre> <ol> <li>Configure the IPStorage interface.</li> </ol> <pre><code>interface ipStorage 1/1-6\n10g-speed-mode\ninterface ipStorage 1/1\nip address 10.1.1.100 255.255.255.0\nno shut\ninterface ipStorage 1/2\nip address 10.1.1.101 255.255.255.0\nno shut\n</code></pre> <ol> <li>Configure static routes</li> </ol> <p><pre><code>ip route 10.2.1.0 255.255.255.0 10.1.1.1\n</code></pre> Display the routing table <pre><code>show ips ip route interface ipStorage 1/1\n</code></pre></p> <ol> <li>Create an FCIP profile and then assign the IPStorage interface\u2019s IP address to the profile.</li> </ol> <pre><code>fcip profile 10\nip address 10.22.9.20\nsh fcip profile\n</code></pre> <ol> <li>Create an FCIP interface and then assign the profile to the interface.</li> </ol> <p><pre><code>interface fcip 51\nuse-profile 10\npeer-info ipaddr 10.1.1.1\nno shut\n</code></pre> 1. Configure the peer IP address for the FCIP interface. 1. Enable the interface.</p>"},{"location":"SAN/cisco-mds/#implementation-checklist_1","title":"Implementation Checklist","text":"<ul> <li> Enter configuration mode</li> </ul> <pre><code>    config \n</code></pre> <ul> <li> Set password to pre-defined secure password </li> </ul> <pre><code> username admin password &lt;new password&gt;   \n</code></pre> <ul> <li> Set the switch name </li> </ul> <pre><code> switchname &lt;switch name&gt; \n</code></pre> <ul> <li> Set IP address and subnet mask</li> </ul> <pre><code> int mgmt 0 ; ip address 10.0.0.10 255.255.255.0 \n</code></pre> <ul> <li> Set default gateway </li> </ul> <pre><code> ip default-gateway 10.0.0.1\n</code></pre> <ul> <li> Enable SSH </li> </ul> <pre><code> ssh key rsa 1024 force ; feature ssh \n</code></pre> <ul> <li> Disable Telnet </li> </ul> <pre><code> no feature telnet \n</code></pre> <ul> <li> Enable http-server </li> </ul> <pre><code> feature http-server \n</code></pre> <ul> <li> Configure timezone </li> </ul> <pre><code> clock timezone CST -6 0 \n</code></pre> <ul> <li> Configure clock </li> </ul> <pre><code> clock set 15:30:00 29 September 2020 \n</code></pre> <ul> <li> Configure summertime</li> </ul> <pre><code> clock summer-time CDT 2 Sunday March 02:00 1 Sunday November 02:00 60 \n</code></pre> <ul> <li> Enable NPIV feature </li> </ul> <pre><code> feature npiv \n</code></pre> <ul> <li> Configure NTP server </li> </ul> <pre><code> ntp server ntp.server.com \n</code></pre> <ul> <li> Configure default switchport interface state </li> </ul> <pre><code> system default switchport shutdown \n</code></pre> <ul> <li> Configure default switchport trunk mode </li> </ul> <pre><code> system default switchport trunk mode on \n</code></pre> <ul> <li> Configure switchport mode </li> </ul> <pre><code> interface fc1/1-96 ; switchport mode auto ; exit \n</code></pre> <ul> <li> Configure default zone policy </li> </ul> <pre><code> no system default zone default-zone permit \n</code></pre> <ul> <li> Enable full zoneset distribution </li> </ul> <pre><code> system default zone distribute full \n</code></pre> <ul> <li> Create VSAN(s) </li> </ul> <pre><code> vsan database ; vsan 10 \n</code></pre> <ul> <li> Name VSAN </li> </ul> <pre><code> vsan 10 name fabricA \n</code></pre> <ul> <li> Assign ports to VSAN(s) </li> </ul> <pre><code> vsan database ; vsan 10 interface fc1/1-96 \n</code></pre> <ul> <li> Configure default zone mode (basic/enhanced) </li> </ul> <pre><code> zone mode enhanced vsan 10 \n</code></pre> <ul> <li> Configure zoning confirm-commit </li> </ul> <pre><code> zone confirm-commit enable vsan 10 \n</code></pre> <ul> <li> Enable smart zoning </li> </ul> <pre><code> zone smart-zoning enable vsan 10 \n</code></pre> <ul> <li> Configure device-alias mode (basic/enhanced) </li> </ul> <pre><code> device-alias mode enhanced \n</code></pre> <ul> <li> Configure device-alias confirm-commit </li> </ul> <pre><code> device-alias confirm-commit enable \n</code></pre> <ul> <li> Configure domain name </li> </ul> <pre><code> ip domain-name lookup ; ip domain-name demo.com \n</code></pre> <ul> <li> Configure DNS </li> </ul> <pre><code> ip name-server 1.1.1.1 2.2.2.2 \n</code></pre> <ul> <li> Verify licenses (POD, etc) </li> </ul> <pre><code>\n</code></pre> <ul> <li> Configure zoning </li> </ul> <pre><code> !Full Zone Database Section for vsan \n</code></pre> <ul> <li> Import fcaliases to device-alias </li> </ul> <pre><code> device-alias import fcalias vsan 10 ; device-alias commit \n</code></pre> <ul> <li> Update NX-OS </li> </ul> <pre><code>\n</code></pre> <ul> <li> Configure static domain-id </li> </ul> <pre><code> fcdomain domain 11 static vsan 10 \n</code></pre> <ul> <li> Configure contact name </li> </ul> <pre><code> snmp-server contact John Doe \n</code></pre> <ul> <li> Configure contact email address </li> </ul> <pre><code> callhome ; email-contact johndoe@demo.com \n</code></pre> <ul> <li> Configure contact phone </li> </ul> <pre><code> callhome ; phone-contact +1-123-456-7890 \n</code></pre> <ul> <li> Configure contact street address </li> </ul> <pre><code> callhome ; streetaddress 123 North Street, DemoVille, MN 55555 \n</code></pre> <ul> <li> Configure site-id </li> </ul> <pre><code> callhome ; site-id Site1 \n</code></pre> <ul> <li> Call home distribute </li> </ul> <pre><code> callhome ; distribute \n</code></pre> <ul> <li> Call home destination profile </li> </ul> <pre><code> callhome ; destination-profile full-txt-destination email-addr DemoTeam@demo.com \n</code></pre> <ul> <li> Email From </li> </ul> <pre><code> callhome ; transport email from DemoTeam@demo.com \n</code></pre> <ul> <li> Email Reply To </li> </ul> <pre><code> callhome ; transport email reply-to switch1@demo.com \n</code></pre> <ul> <li> SMTP Server </li> </ul> <pre><code> callhome ; transport email smtp-server smtprelay.demo.com port 25 \n</code></pre> <ul> <li> Enable call home </li> </ul> <pre><code> callhome ; enable \n</code></pre> <ul> <li> Commit call home </li> </ul> <pre><code> callhome ; commit \n</code></pre> <ul> <li> Label the switch ports </li> </ul> <pre><code>interface fc1/1\nswitchport description &lt;port label&gt;\n</code></pre> <ul> <li> Copy run start</li> </ul> <pre><code> copy run start \n</code></pre>"},{"location":"SAN/cisco-mds/#port-channel-configuration","title":"Port Channel Configuration","text":"<p>Info</p> <p>Ensure one or more ISL exists between the two switches.  Make sure they come up as \u201cTE\u201d ports with the correct VSANs.  ISLs can be in VSAN 1 or just in the VSAN that needs to be extended between two switches.</p>"},{"location":"SAN/cisco-mds/#create-a-port-channel","title":"Create a Port Channel","text":"<pre><code>interface port-channel 3\nchannel mode active\n</code></pre>"},{"location":"SAN/cisco-mds/#add-ports-to-a-port-channel","title":"Add Ports to a Port Channel","text":"<pre><code>interface fc1/1-2\nchannel-group 3 force\n</code></pre>"},{"location":"SAN/cisco-mds/#activate-a-port-channel","title":"Activate a Port Channel","text":"<pre><code>interface port-channel 3\nno shut\n</code></pre>"},{"location":"SAN/cisco-mds/#delete-a-port-channel","title":"Delete a Port channel","text":"<pre><code>no interface port-channel 3\n</code></pre>"},{"location":"SAN/cisco-mds/#misc-information","title":"Misc Information","text":""},{"location":"SAN/cisco-mds/#power-supply-modes","title":"Power Supply Modes","text":"<p>Cisco MDS 9000 Series Multilayer Switches support different number and capabilities of power supplies. This section describes the power modes that are available on Cisco MDS 9000 Series Multilayer Switches.</p> <p>Cisco MDS 9710 Multilayer Switches can support up to four power supplies when they have only Cisco MDS 9700 48-Port 32-Gbps Fibre Channel Switching Modules installed on them. By default, the four power supplies are installed in the power supply bays 1 to 4.</p> <p>You can configure one of the following power modes to use the combined power provided by the installed power supply units (no power redundancy) or to provide power redundancy when there is power loss. We recommend that you configure the full redundancy power mode on your switch for optimal performance.</p> <p>Combined mode\u2014This mode uses the combined capacity of all the power supplies. In case of power supply failure, the entire switch can be shut down (depending on the power used) causing traffic disruption. This mode is seldom used, except in cases when the switch requires more power.</p> <p>Input Source (grid) redundancy mode\u2014This mode allocates half of the power supplies to the available category and the other half to the reserve category. You must use different power supplies for the available and reserve categories so that if the power supplies used for the active power fails, the power supplies used for the reserve power can provide power to the switch. If the grid-redundancy mode is lost, the power mode reverts to combined mode.</p> <p>Power-supply (N+1) redundancy mode\u2014This mode allocates one power supply as reserve to provide power to the switch in case an active power supply fails. The remaining power supplies are allocated for the available category. The reserve power supply must be at least as powerful as each of the power supplies used for the active power.</p> <p>Full-redundancy mode\u2014This mode is a combination of input-source (grid) and power-supply (N+1) redundancy modes. Similar to the input-source redundancy mode, this mode allocates half of the power supplies to the available category and the remaining power supplies to reserve category. One of the reserve power supplies can alternatively be used to provide power if a power supply used for the active power fails.</p> <p>For more information on the power supply modes supported on your switch, see the Hardware Installation Guide corresponding to your switch.</p>"},{"location":"SAN/cisco-mds/#links","title":"Links","text":"<ul> <li>Recommended Releases for Cisco MDS 9000 Series Switches</li> </ul>"},{"location":"Servers/ibmi/","title":"IBMi","text":""},{"location":"Servers/ibmi/#ibmi-migration-cleanup-steps","title":"IBMi Migration Cleanup Steps","text":""},{"location":"Servers/ibmi/#remove-failed-and-non-reporting-resources","title":"Remove failed and non-reporting resources","text":"<ul> <li>Activate partition in B/manual</li> <li>Option 3  for DST main menu</li> <li>Log in</li> <li>Option 7 Start a service tool</li> <li>Option 4 hardware service manager</li> <li>Option 4  failed and non-reporting resources</li> <li>Delete all failed and non-reporting resources with a 4 on each line (enter)</li> </ul> <p>This should remove all logical names for the internal disks so they are not part of the configuration and prevent errors</p>"},{"location":"Servers/ibmi/#call-multipathresetter","title":"Call multipathresetter","text":"<p>From DST main menu: - Option 7 Start a service tool - Option 1 Display/Alter/Dump - Option 1 Display/Alter Storage - Option  2 License Internal Code (LIC) data - Option 14 Advance Analysis - 3 page downs, \"1\" on MULTIPATHRESETTER (enter) - Use options \"-resetmp -all\" (enter) - Use options \"-confirm -all\" (enter)</p> <p>Results will show and success at the end</p>"},{"location":"Servers/ibmi/#check-paths-and-number-of-units","title":"Check paths and number of Units","text":"<p>From DST main menu: - Option 4 work with disk units - Option 1 work with disk configuration - Option 1 display disk configuration - Option 9 display disk path status</p> <p>Each unit should have required number of active and passive path (typically 2/2 or 4/4).  IBMi supports a maximum of 8 paths.  Do not zone more than 8 paths.</p>"},{"location":"Servers/ibmi/#restricted-ipl","title":"Restricted IPL","text":"<p>From DST main menu: - Option 1 Perform an IPL (enter) went to a screen showing C6004065) - If Prompted due to non-configured disks that are known choose Option 1 to keep configuration - Log In - IPL Options-  Y on Start system to restricted state (enter)</p>"},{"location":"Servers/linux/","title":"Linux","text":""},{"location":"Servers/linux/#redhat-enterprise-server","title":"RedHat Enterprise Server","text":""},{"location":"Servers/linux/#handy-scripts-and-commands","title":"Handy Scripts and Commands","text":""},{"location":"Servers/linux/#list-wwpns","title":"List WWPNs","text":"<pre><code>    for host in /sys/class/fc_host/host*; do\n        echo \"WWPN and state for $host:\"\n        cat \"$host/port_name\" | sed 's/^0x//'\n        cat \"$host/port_state\"\n        echo\n    done\n</code></pre>"},{"location":"Servers/linux/#procedures","title":"Procedures","text":""},{"location":"Servers/linux/#updating-rhel-minor-version","title":"Updating RHEL Minor Version","text":"<ol> <li> <p>Set the release version</p> <pre><code>subscription-manager release --set=8.7\n</code></pre> </li> <li> <p>Update</p> <pre><code>dnf update\n</code></pre> </li> <li> <p>Reboot to activate new kernel</p> <pre><code>reboot\n</code></pre> </li> <li> <p>Verify</p> <pre><code>uname -r\ncat /etc/redhat-release\n</code></pre> </li> </ol>"},{"location":"Servers/linux/#changing-the-default-kernel","title":"Changing The Default Kernel","text":"<p>Simple way common to RHEL8 and RHEL9</p> <ol> <li> <p>Confirmation before the change</p> <pre><code>grubby --default-kernel\n# /boot/vmlinuz-5.14.0-70.30.1.el9_0.x86_64\n\nuname -r\n# 5.14.0-70.30.1.el9_0.x86_64\n</code></pre> </li> <li> <p>Show installed kernel list ( You can count 0,1,.. from the top of the title line)</p> <pre><code>grubby --info=ALL | grep title\n# title=\"Red Hat Enterprise Linux (5.14.0-70.30.1.el9_0.x86_64) 9.0 (Plow)\"    &lt;---0\n# title=\"Red Hat Enterprise Linux (5.14.0-70.13.1.el9_0.x86_64) 9.0 (Plow)\"    &lt;---1\n</code></pre> </li> <li> <p>Set the default kernel</p> <pre><code>grub2-set-default 1\n</code></pre> </li> <li> <p>Confirmation after the change</p> <pre><code>grubby --default-kernel\n# /boot/vmlinuz-5.14.0-70.13.1.el9_0.x86_64\n</code></pre> </li> <li> <p>reboot the system</p> <pre><code>reboot\n</code></pre> </li> <li> <p>Confirmation after system reboot</p> <pre><code>uname -r \n# 5.14.0-70.13.1.el9_0.x86_64\n\ngrubby --default-kernel\n# /boot/vmlinuz-5.14.0-70.13.1.el9_0.x86_64\n</code></pre> </li> </ol>"},{"location":"Servers/linux/#downgrade-kernel-devel-to-match-system-kernel","title":"Downgrade kernel-devel to match system kernel","text":"<pre><code>    uname -r\n</code></pre>"},{"location":"Software/","title":"Software Notes","text":""},{"location":"Software/#automation","title":"Automation","text":"<ul> <li>Ansible</li> <li>IBM Copy Services Manager (CSM)</li> </ul>"},{"location":"Software/#monitoring","title":"Monitoring","text":"<ul> <li>IBM Spectrum Control</li> <li>IBM Storage Insights</li> </ul>"},{"location":"Software/#key-management","title":"Key Management","text":"<ul> <li>IBM Guardiam Key Lifcycle Manager (GKLM)</li> </ul>"},{"location":"Software/ansible/","title":"Ansible","text":""},{"location":"Software/ansible/#documentation-and-resources","title":"Documentation and Resources","text":"<ul> <li>Ansible Site</li> <li>Ansible Documentation</li> <li>Ansible Galaxy</li> <li>Online YAML Tools</li> <li>Code Beautify</li> </ul>"},{"location":"Software/ansible/#galaxy-collections-i-care-about","title":"Galaxy Collections I Care About","text":""},{"location":"Software/ansible/#ibm-storage","title":"IBM Storage","text":"<ul> <li>IBM Storage Virtualize Galaxy Collection</li> <li>IBM Storage Virtualize on Github</li> </ul>"},{"location":"Software/ansible/#brocade","title":"Brocade","text":"<ul> <li>Brocade FOS FC Collection</li> <li>Brocade on Github</li> </ul> <p>Ansible collections stored here: <code>/root/.ansible/collections/ansible_collections/ibm/storage_virtualize</code></p>"},{"location":"Software/ansible/#implementation","title":"Implementation","text":""},{"location":"Software/ansible/#install-python","title":"Install Python","text":"<pre><code>dnf install python3.9 -y  \n</code></pre>"},{"location":"Software/ansible/#install-ansible","title":"Install Ansible","text":"<pre><code>python3 -m pip install --user ansible  \n</code></pre>"},{"location":"Software/ansible/#getting-started","title":"Getting Started","text":"<p>Sample Ansible Setup</p> <pre><code>mkdir /etc/ansible\nmkdir /etc/ansible/playbooks\n</code></pre> <p>You can run ansible modules directly with the command:  <code>ansible</code> You can run an ansible playbook using the command:  <code>ansible-playbook</code></p>"},{"location":"Software/ansible/#hello-world-playbook-example","title":"Hello World! Playbook Example","text":"<ol> <li> <p>Create the emply playbook file</p> <pre><code>cd /etc/ansible/playbooks\nvi helloworld.yml\n</code></pre> </li> <li> <p>Enter the following contents in the playbook YAML file</p> <pre><code>---\n- name: My second playbook\nhosts: localhost\n\ntasks:\n- name: Print Hello World!\n    debug: msg=\"Hello World!\"\n</code></pre> </li> <li> <p>Run the playbook</p> <pre><code>ansible-playbook helloworld.yml\n</code></pre> </li> </ol>"},{"location":"Software/control/","title":"IBM Spectrum Control","text":""},{"location":"Software/control/#administration","title":"Administration","text":""},{"location":"Software/control/#stopping-the-ibm-spectrum-control-servers-on-linux-or-aix","title":"Stopping the IBM Spectrum Control servers on Linux or AIX","text":"<p>Info</p> <p>Tip: The default installation_dir is /opt/IBM/TPC.  Custom directory we use is /SpectrumControl  </p> <p>To stop the servers on Linux or AIX operating systems, enter the following commands in the following order:  </p> <ul> <li> <p>Storage Resource Agent </p> <p>/SRA_installation_dir/agent/bin/agent.sh stop  </p> </li> <li> <p>Web server  </p> <p>/installation_dir/scripts/stopTPCWeb.sh</p> </li> <li> <p>Export server  </p> <p>/installation_dir/scripts/stopTPCExport.sh</p> </li> <li> <p>Data server</p> <p>/installation_dir/scripts/stopTPCData.sh.</p> </li> <li> <p>Device server</p> <p>/installation_dir/scripts/stopTPCDevice.sh</p> </li> <li> <p>Alert server</p> <p>/installation_dir/scripts/stopTPCAlert.sh</p> </li> </ul>"},{"location":"Software/control/#starting-the-ibm-spectrum-control-servers-on-linux-or-aix","title":"Starting the IBM Spectrum Control servers on Linux or AIX","text":"<p>Info</p> <p>Note: The default installation_dir is /opt/IBM/TPC.  </p> <p>To start the servers on the Linux or AIX operating systems, enter the following commands in the following order:  </p> <ul> <li> <p>Data server  </p> <p>/installation_dir/scripts/startTPCData.sh  </p> </li> <li> <p>Device server  </p> <p>/installation_dir/scripts/startTPCDevice.sh </p> </li> <li> <p>Alert server   </p> <p>/installation_dir/scripts/startTPCAlert.sh  </p> </li> <li> <p>Export server  </p> <p>/installation_dir/scripts/startTPCExport.sh  </p> </li> <li> <p>Web server  </p> <p>/installation_dir/scripts/startTPCWeb.sh  </p> </li> <li> <p>Storage Resource Agent  </p> <p>/installation_dir/agent/bin/agent.sh start </p> </li> </ul>"},{"location":"Software/csm/","title":"IBM CSM","text":""},{"location":"Software/csm/#_1","title":"IBM CSM","text":""},{"location":"Software/gklm/","title":"IBM GKLM","text":""},{"location":"Software/gklm/#documentation-links","title":"Documentation Links","text":"<ul> <li>SKLM Documentation</li> <li>DS8000 Encryption Redpaper</li> </ul>"},{"location":"Software/gklm/#procedures","title":"Procedures","text":""},{"location":"Software/gklm/#migrating-keys-using-cli","title":"Migrating Keys Using CLI","text":"<p>On SKLM server2, do the following:</p> <ol> <li>Login as LOCAL ADMINISTRATOR</li> <li> <p>Change directories:</p> <pre><code>cd \\Program Files\\IBM\\WebSphere\\AppServer\\bin&gt;\n</code></pre> </li> <li> <p>Log into the WebSphere CLI</p> <pre><code>wsadmin.bat -username SKLMAdmin -password ESI@2019bpic -lang jython\n</code></pre> </li> <li> <p>Create an SSL certificate, say sslCert, on server2 if not previously done:</p> <pre><code>print AdminTask.tklmCertCreate ('[-type selfsigned -alias sslCert -cn SSLCert -keyStoreName defaultKeyStore -usage SSLSERVER -validity 9000]')\nWhere sslCert is an example for an alias label.\n</code></pre> </li> <li> <p>List the certificate to verify it is created or if it is already there.</p> <pre><code>print AdminTask.tklmCertList()\n\nExample Output clipped as we care only about the following 3 parameters:\nCTGKM0001I Command succeeded.\n...\nuuid = CERTIFICATE-xxxxxxxx-xxxx-xxx-xxxx-xxxxxxxxxxxx\nalias(es) = sslCert\nkey store name(s) = defaultKeyStore\n...\n\nMake a note of above 3 parameters as they will be used in the certificate export command:\n</code></pre> </li> <li> <p>Export sslCert into a file, say sslCert.der.</p> <pre><code>print AdminTask.tklmCertExport ('[-uuid CERTIFICATE-b4741a9-651e699c-8825-4f55-bed6-a37067bed6a0 -format DER -fileName sslCert.der]')\n\nCTGKM0001I Command succeeded.\nC:\\Program Files\\IBM\\WebSphere\\AppServer\\products\\sklm\\data\\sslCert.der\n</code></pre> </li> <li> <p>Copy sslCert.der file to TKLM server1.</p> </li> </ol> <p>On TKLM server1, do the following:</p> <ol> <li>Login as LOCAL ADMINISTRATOR</li> <li> <p>Change directories:</p> <pre><code>cd C:\\IBM\\tivoli\\tiptklmV2\\bin\n</code></pre> </li> <li> <p>Log into the Websphere CLI</p> <pre><code>wsadmin.bat -username TKLMAdmin -password &lt;put.pwd.here&gt; -lang jython\n</code></pre> </li> <li> <p>List the certificates to get the 'keystore name' on that server1 as it will be used in the import certificate command:</p> <pre><code>print AdminTask.tklmCertList()\n    Example Output clipped as we care only about the following parameter:\n    CTGKM0001I Command succeeded.\n    ...\n    key store name(s) = defaultKeyStore\n    ...\n</code></pre> </li> <li> <p>Import sslCert.der on TKLM server1 that came from SKLM server2</p> <pre><code>print AdminTask.tklmCertImport ('[-fileName C:\\\\SKLM\\\\svc-v7k_v5k.der -alias svc-v7k_v5k -format DER -keyStoreName \"defaultKeyStore\" -usage SSLSERVER]')\n</code></pre> </li> <li> <p>List the certificate to verify it is imported.</p> <pre><code>print AdminTask.tklmCertList()\n    Make a note of the following parameters as they will be used in the key export command:\n    uuid = CERTIFICATE-xxxc20f3\n    alias(es) = sslCert\n    key store name(s) = Tivoli Key Lifecycle Manager Keystore\n</code></pre> </li> <li> <p>List the keys on TKLM server1 to find out which keys to move to SKLM server2:</p> <pre><code>print AdminTask.tklmKeyList()\n</code></pre> </li> <li> <p>Export desired key or a range of keys into a file, say exportedKeys, while specifying the SSL certificate alias sslCert.der. Keys should be wrapped by the certificate.</p> <pre><code>print AdminTask.tklmKeyExport('[-aliasRange uni00-c7 -fileName C:\\\\exportedKeys -keyStoreName \"Tivoli Key Lifecycle Manager Keystore\" -type secretkey -keyAlias sslCert]')\n</code></pre> </li> <li> <p>Copy exportedKeys file to SKLM server2.</p> </li> </ol> <p>On SKLM server2, do the following:</p> <ol> <li> <p>Import exportedKeys on SKLM server2 that came from TKLM server1</p> <pre><code>print AdminTask.tklmKeyImport ('[-keyAlias sslCert -type secretkey -fileName C:\\\\exportedKeys -keyStoreName defaultKeyStore -usage LTO]')\n</code></pre> </li> <li> <p>List the keys to verify they are imported.</p> <pre><code>print AdminTask.tklmKeyList()\n</code></pre> </li> <li> <p>Create a keygroup on SKLM server2, example name: tklmKeyGroup.</p> <pre><code>print AdminTask.tklmGroupCreate ('[-name tklmKeyGroup -type keygroup -usage LTO]')\n</code></pre> </li> <li> <p>List the keygroup to either obtain the name if it was already created or confirm creation:</p> <pre><code>print AdminTask.tklmGroupList('[-type keygroup -v y]')\n</code></pre> </li> <li> <p>Add one key into keygroup. </p> <pre><code>print AdminTask.tklmGroupEntryAdd('[-name tklmKeyGroup -type keygroup -entry \"{type key} {alias aaa000000000000000019} {keyStoreName defaultKeyStore}\"]')\n</code></pre> </li> <li> <p>Restart sklm.</p> </li> </ol>"},{"location":"Software/storage-insights/","title":"IBM Storage Insights","text":""},{"location":"Software/storage-insights/#documentation-links","title":"Documentation Links","text":"<ul> <li>Storage Insights Documentation </li> <li>Quick Start Guide </li> <li>IBM Storage Insights Security Guide</li> <li>IBM Storage Insights Security Sheet (one-pager)</li> </ul>"},{"location":"Software/storage-insights/#implementation","title":"Implementation","text":"<p>Use this link to secure a new Storage Insights Instance with Spectrum Control License</p>"},{"location":"Software/storage-insights/#data-collector-requirements","title":"Data Collector Requirements","text":""},{"location":"Software/storage-insights/#operating-systems","title":"Operating Systems","text":"<ul> <li>Windows Server 2012 and later.  </li> <li>POWER6\u00ae or later systems that use AIX\u00ae 7.x or later. The AIX data collector can run on a physical AIX installation or a logical partition (LPAR).  </li> <li>The Linux\u00ae data collector runs on 64-bit Linux operating systems on x86-64 and PPC64LE systems only.  <ul> <li>The supported Linux operating systems for x86-64 are Red Hat\u00ae Enterprise Linux 7 or later and CentOS 7 and later versions.  </li> <li>The supported Linux operating system for PPC64LE is Red Hat Enterprise Linux 7.x on POWER8\u00ae and Red Hat Enterprise Linux 8.x. on POWER9\u2122\u00ae and POWER10\u00ae. The data collector on Linux PPC64LE has the additional limitation that you cannot monitor IBM FlashSystem A9000, XIV\u00ae, IBM Storage Accelerate, and non-IBM devices.  </li> </ul> </li> </ul>"},{"location":"Software/storage-insights/#hardware","title":"Hardware","text":"<ul> <li>Deploy data collectors on servers or virtual machines that have access to the devices that you want to monitor and access to the internet to communicate with IBM Cloud. You can also deploy data collectors in a LAN where routing is configured to allow access across different subnets and on a WAN where devices are located in different geographical locations.</li> <li>On the server or virtual machine, you must provide at least 1 GB of RAM and 3 GB of disk space.</li> <li>Ensure that the operating system where you install the data collector has general or extended support for maintenance and security fixes.</li> <li>The location where you install a data collector must be available 24X7: Don't install a data collector on a laptop or personal workstation. Shutting down a laptop or personal workstation or putting it into sleep mode will interrupt data collection.</li> <li>Don't install the data collector to a file system that was mounted or mapped under a user login session. These file systems can be temporary and might not persist after the user logs out of the network. Note that you can install a data collector to a system-mounted or mapped file system because those file systems are typically more permanent.</li> </ul>"},{"location":"Storage/","title":"Storage Notes","text":""},{"location":"Storage/#ibm-storage-systems","title":"IBM Storage Systems","text":"<ul> <li>IBM FlashSystem</li> <li>IBM DS8000</li> </ul>"},{"location":"Storage/#software-defined-storage","title":"Software Defined Storage","text":"<ul> <li>IBM Ceph</li> <li>IBM Spectrum Scale</li> <li>IBM Spectrum Archive</li> <li>IBM Cloud Object Storage</li> </ul>"},{"location":"Storage/archive/","title":"IBM Spectrum Archive","text":""},{"location":"Storage/archive/#implementation","title":"Implementation","text":""},{"location":"Storage/archive/#installation-steps","title":"Installation Steps","text":"<ol> <li> <p>Run this command on both nodes to enable the required repository:  </p> <pre><code>subscription-manager repos --enable codeready-builder-for-rhel-8-ppc64le-rpms\n</code></pre> </li> <li> <p>Install prereqs:  </p> <pre><code>dnf install attr boost-date-time boost-filesystem boost-program-options boost-serialization boost-thread boost-regex.ppc64le fuse fuse-libs  libxml2 libuuid libicu lsof nss-softokn-freebl openssl net-snmp  python3-pyxattr java\n</code></pre> </li> <li> <p>Mount the iso</p> <pre><code>mkdir /mnt/iso\nmount -o loop /home/install/archive/ISAEEV-SME_1.3.3_MP_EN.iso /mnt/iso\ncd /mnt/iso\ncp ltfsee-1.3.3.0-53211-product.bin /home/install/archive\n</code></pre> </li> <li> <p>Extract the installation files</p> <pre><code>cd /home/install/archive/\n./ltfsee-1.3.3.0-53211-product.bin\n</code></pre> </li> <li> <p>Run the LTFSEE installer check</p> <pre><code>cd ~/LTFSEE/rpm.1330_53211\n./ltfsee_install --check\n</code></pre> </li> <li> <p>Install the software</p> <pre><code>./ltfsee_install --install\n</code></pre> <p>[root@icas02 rpm.1330_53211]#</p> </li> <li> <p>Ensure the GPFS Filesystem has DMAPI enabled</p> <pre><code>mmlsfs gpfs0 | grep DMAPI\n</code></pre> <ol> <li> <p>If DMAPI is not enabled - do the following</p> <ol> <li> <p>Unmount the filesystem</p> <pre><code>/usr/lpp/mmfs/bin/mmunmount /dev/gpfs0 -a\n</code></pre> </li> <li> <p>Enable DMAPI</p> <pre><code>/usr/lpp/mmfs/bin/mmchfs /dev/gpfs0 -z yes\n</code></pre> </li> <li> <p>Remount the filesystem</p> <pre><code>/usr/lpp/mmfs/bin/mmmount /dev/gpfs0 -a\n</code></pre> </li> </ol> </li> </ol> </li> <li> <p>Configuration </p> <pre><code>cd /opt/ibm/ltfsee/bin\n./ltfsee_config -m CLUSTER\n</code></pre> <p>Alert</p> <p>During the configuration, you will be prompted to choose a filesystem.  Choose gpfs0 or whatever the main GPFS filesystem name is. Make sure you say \"n\" to this question:  <code>Then do you want to perform the ADD_CTRL_NODE mode? [Y/n]:</code> </p> </li> <li> <p>Log into each node where there is a tape library zoned/configured and add it as a control node:</p> <pre><code>ltfsee_config -m ADD_CTRL_NODE -g\n</code></pre> </li> <li> <p>Start the cluster</p> <pre><code>eeadm cluster start\n</code></pre> </li> </ol>"},{"location":"Storage/archive/#uninstall-steps","title":"Uninstall Steps","text":"<ol> <li> <p>CD to the rpm directory</p> <pre><code>cd ~/LTFSEE/rpm.1330_53211/\n</code></pre> </li> <li> <p>Uninstall the software</p> <p>./ltfsee_install --clean</p> </li> </ol>"},{"location":"Storage/archive/#scripts","title":"Scripts","text":""},{"location":"Storage/archive/#script-to-assign-tapes","title":"Script to assign Tapes","text":"<pre><code>POOL=icas02_pool\nLIBRARY=icas02_ts3310\neeadm tape list --no-header -l $LIBRARY | grep unassigned | while read -a tape ; do eeadm tape assign ${tape[0]} -p $POOL -l $LIBRARY -f ; done\n</code></pre>"},{"location":"Storage/archive/#lifecycle-policy","title":"Lifecycle Policy","text":"<p>Create Export</p> <p>HSM Rule https://www.ibm.com/docs/en/spectrum-archive-ee/1.3.3?topic=migration-automated-spectrum-scale-policies</p> <pre><code>mmaddcallback MIGRATION2 --command /usr/lpp/mmfs/bin/mmstartpolicy --event lowDiskSpace,noDiskSpace --parms \"%eventName %fsName --single-instance -B 10000\"\n</code></pre> <p>Here's an example of the policy</p> <pre><code>define(\n    user_exclude_list,\n    (\n        FALSE\n        OR (PATH_NAME LIKE '/ibm/gpfs/%' AND NAME LIKE 'confidential.%')\n        OR PATH_NAME LIKE '%/.SpaceMan/%'\n        OR PATH_NAME LIKE '/ibm/gpfs/.ltfsee/%'\n        OR ((CURRENT_TIMESTAMP - MODIFICATION_TIME) &lt; INTERVAL '121' SECONDS)\n        OR NLINK != 1\n    )\n)\n\ndefine(\n    user_include_list,\n    (\n    FALSE\n    )\n)\n\ndefine(\n    exclude_list,\n    (NAME LIKE 'dsmerror.log')\n)\n\n/* define is_premigrated uses Spectrum Scale inode attributes that mark a file \n    as a premigrated file. Use the define to include or exclude premigrated \n    files from the input file list */\ndefine(\n    is_premigrated, \n    (MISC_ATTRIBUTES LIKE '%M%' AND MISC_ATTRIBUTES NOT LIKE '%V%') \n) \n\n/* define is_migrated uses Spectrum Scale inode attributes that mark a file \n    as a migrated file. Use the define to include or exclude migrated \n    files from the input file list */\ndefine(\n    is_migrated, \n    (MISC_ATTRIBUTES LIKE '%V%') \n) \n\nRULE EXTERNAL POOL 'ltfs1'\nEXEC '/opt/ibm/ltfsee/bin/eeadm' /*The full path to the eeadm command must be specified */\nOPTS '-p ltfs-storage-pool1@library1,ltfs-storage-pool2@library2'\nSIZE 10485760\n\n\nRULE 'MigAndPremigToExt' MIGRATE FROM POOL 'system'\nTHRESHOLD(90,80)\nWEIGHT( CURRENT_TIMESTAMP - ACCESS_TIME )\nTO POOL 'ltfs1'\nWHERE (\n    FILE_SIZE &gt; 5242880 \n    AND NOT is_migrated\n    AND NOT exclude_list\n    AND (NOT user_exclude_list OR user_include_list)\n)\n</code></pre>"},{"location":"Storage/ceph/","title":"IBM Ceph","text":""},{"location":"Storage/ds8000/","title":"IBM DS8000","text":""},{"location":"Storage/ds8000/#documenation-links","title":"Documenation Links","text":"<ul> <li>IBM DS8900 Documentation</li> <li>DS8000 Encryption Redpaper</li> <li>DS8000 Host Adapter Configuration Guidelines</li> </ul>"},{"location":"Storage/ds8000/#implementation","title":"Implementation","text":""},{"location":"Storage/ds8000/#planning","title":"Planning","text":"<ul> <li>Installation Worksheets</li> </ul>"},{"location":"Storage/ds8000/#default-logins","title":"Default Logins","text":"<p>Info</p> <p>7.5+ URL is https://ip_address 7.4- URL is https://ip_address:8452/DS8000/Login</p> <ul> <li>CE Login to HMC is: CE and serv1cece</li> <li>Customer Login to HMC is: customer and cust0mer</li> <li>Normal Login to S-HMC is: hscroot and abc123</li> <li>DS CLI and GUI default login is: admin and admin</li> <li>Security Admin default login is: secadmin and secadmin</li> </ul>"},{"location":"Storage/ds8000/#exporting-the-system-summary","title":"Exporting the System Summary","text":""},{"location":"Storage/ds8000/#procedure","title":"Procedure","text":"<ol> <li>Click the Export icon next to the Actions menu at the top-left of the Dashboard page.</li> <li>Select Export System Summary.</li> <li>Save the CSV file.</li> </ol>"},{"location":"Storage/ds8000/#helpful-links","title":"Helpful Links","text":"<ul> <li>System Summary Details</li> <li>Exporting and formatting the DS8000 System Summary</li> </ul>"},{"location":"Storage/ds8000/#exporting-the-system-performance-summary","title":"Exporting the System Performance Summary","text":""},{"location":"Storage/ds8000/#procedure_1","title":"Procedure","text":"<ol> <li>Click the Export icon next to the Actions menu at the top-left of the Dashboard page.</li> <li>Select Export Performance Summary.</li> <li>Save the CSV file.</li> </ol>"},{"location":"Storage/flashsystem/","title":"IBM FlashSystem","text":""},{"location":"Storage/flashsystem/#documentation-links","title":"Documentation Links","text":""},{"location":"Storage/flashsystem/#support-information","title":"Support Information","text":"<p>Find configuration limits and restrictions, release notes, and product documentation for IBM FlashSystem storage.</p> <ul> <li>Support Information for FlashSystem 9500</li> <li>Support Information for FlashSystem 9200</li> <li>Support Information for FlashSystem 7300</li> <li>Support Information for FlashSystem 7200</li> <li>Support Information for FlashSystem 5000 and 5200</li> <li>Support Center IPs</li> </ul>"},{"location":"Storage/flashsystem/#implementation-guide","title":"Implementation Guide","text":"<p>A great reference to use during initial implementation of a new FlashSystem</p> <ul> <li>Implementation Guide for IBM Storage Virtualize Version 8.6</li> </ul>"},{"location":"Storage/flashsystem/#best-practices-guide","title":"Best Practices Guide","text":"<p>Use these guides to ensure you are following best practices for zoning, copy services, host connectivity, etc.</p> <ul> <li>Performance and Best Practices Guide for IBM Storage Virtualize 8.6</li> <li>IBM FlashSystem and VMware Implementation and Best Practices Guide</li> </ul>"},{"location":"Storage/flashsystem/#microcode-guidance","title":"Microcode Guidance","text":"<p>If you are upgrading microcode, use this link to determine the latest (LTS) recommended code level along with other levels that are available (non-LTS)</p> <ul> <li>Recommended Code Levels</li> <li>Supported Drive Types and Firmware Levels</li> <li>Download Microcode from IBM Fix Central</li> </ul> <p>This link will show if you are able to upgrade directly to another code level, or if you have to upgrade in two steps.</p> <ul> <li>Concurrent Code Upgrade Paths</li> </ul>"},{"location":"Storage/flashsystem/#other-stuff","title":"Other Stuff","text":"<ul> <li>CSM ESE Sizer</li> <li>Ansible and IBM Storage</li> <li>IBM Storage Ansible Modules</li> <li>Enable the VMware iSER Adapter</li> <li>Vdbench Downloads and User Guide</li> </ul>"},{"location":"Storage/flashsystem/#cheat-sheet","title":"Cheat Sheet","text":"<ul> <li> <p>List current date and time</p> <pre><code>svqueryclock\n</code></pre> </li> <li> <p>Recover offline volumes (i/o group went offline and lose cache)</p> <pre><code>recovervdiskbysystem\n</code></pre> </li> <li> <p>Manually resuming code activation</p> <pre><code>lsupdate\napplysoftware -continue\n</code></pre> </li> <li> <p>Restart Web Service</p> <pre><code>satask restartservice -service tomcat\n</code></pre> </li> <li> <p>IP Replication requires the following firewall ports opened:</p> <ul> <li>Cluster IPs: 3260</li> <li>Data IPs: 3265</li> </ul> </li> <li> <p>Script to Rename Volumes</p> <pre><code>lsvdisk -nohdr | grep -v scsi | while read -a line ; do new_name=${line[1]//msc520/bscbak};new_name=${new_name%_01} ; chvdisk -name $new_name ${line[1]}; done\n</code></pre> </li> <li> <p>Script to validate cabling</p> <pre><code>lsportfc -nohdr | while read -a port; do printf \"%s,port%s,\" \"${port[6]}\" \"${port[2]}\"; lsportfc \"${port[0]}\" | grep fabric_WWN ; done\n</code></pre> </li> </ul>"},{"location":"Storage/flashsystem/#implementation","title":"Implementation","text":""},{"location":"Storage/flashsystem/#implementation-checklist","title":"Implementation Checklist","text":"<p>This is not an official instruction manual from IBM.  Alway refer to the latest IBM docs if you are unsure about how to complete a step in the list below.{.is-info}</p> <p>The following items are a summary of the most common steps that need to be completed on every implementation. \u00a0Some items may not pertain to specific hardware configs (e.g. IP replication), but verifying installs using this list will cover the most critical aspects of a thorough implementation.</p> <ul> <li> Power Up</li> <li> Configure cluster using the technician port</li> <li> Use a web browser to open:\u00a0https://your_management_IP</li> <li> Log in to the management GUI for the first time by using ID\u00a0superuser\u00a0and password\u00a0passw0rd.</li> <li> After you log in, the initial setup wizard helps you get started. \u00a0Use the information on your worksheets to inform your inputs.<ul> <li> Welcome</li> <li> License Agreement</li> <li> Change Password</li> <li> System Name</li> <li> Licensed Functions</li> <li> Date and Time</li> <li> Encryption (license required)</li> <li> Call Home</li> <li> Storage Insights</li> <li> Support Assistance</li> <li> Automatic Configuration</li> <li> Summary</li> </ul> </li> <li> Add additional Control or Expansion Enclosures (if required)</li> <li> Configure the following:<ul> <li> Set the Service IPs</li> <li> Ethernet IPs for ISCSI or IP replication</li> <li> Ethernet Portsets</li> <li> Volume Protection (recommend leaving on)</li> <li> Call Home / Email Notifications</li> <li> SNMP</li> <li> Syslog</li> <li> LDAP (if desired)</li> </ul> </li> <li> Enable Encryption (USB or SKLM)</li> <li> Create encrypted pool with data reduction turned off and 1024 extent size (default in GUI)</li> <li> Add storage to the pool (DRAID6, typically take all defaults in GUI).</li> <li> Modify I/O Group bitmap space (CLI or now in GUI of newer code)</li> <li> Modify fibre channel port masking (if needed for replication)</li> <li> Update System Software</li> <li> Update Drive Firmware</li> </ul>"},{"location":"Storage/flashsystem/#policy-based-replication","title":"Policy-Based Replication","text":"<p>First, here\u2019s a more detail on the steps required to configure PBR:  https://www.ibm.com/docs/en/flashsystem-5x00/8.6.x?topic=5200-getting-started-policy-based-replication</p> <ol> <li>Create a Partnership The partnership definition tells the system what other system(s) it is allowed to communicate with for replication.  It is similar to pprcpath on DS8k, but it really has nothing to do with paths.  Paths are created strictly by what is zoned between the two systems.  It\u2019s just defining the partner system that is eligible to establish replication with and is defining the type (IP or Fibre Channel), speed, type of replication (legacy or policy based) and other variables\u2026.  When you create the partnership, the paths are auto created by whatever ports are zoned to each other on those two systems.</li> <li>Create a provisioning policy on each FlashSystem (optional) Let\u2019s say you want all volumes to be created as thin-provisioned.  You can create a policy for thin-provisioning and apply it to the pool on each FlashSystem.  Then when replication creates volumes on the DR system, they will be thin provisioned.  I believe you will want thick volumes, so you don\u2019t need to do this step.</li> <li>Link Pools Once the partnership is established, the next step is to link pools between those two systems.  This probably seems redundant for your implementation because each of your FS5200s only has a single pool; however, some larger systems can and do have multiple pools, or some companies create child pools for multitenancy, and you can link the child pools instead of linking the entire pool.  Creating a chile pool is not required, and I DO NOT recommend it for your environment.  It\u2019s needless complexity that would not provide value.</li> <li>Create a Replication Policy This is simply a policy that dictates what partner to replicate to and what your desired RPO is.  FlashSystems can have multiple partners, so this policy tell the volume group which one of those partners to use.  If you only have one partner, you still have to create a policy defining that partner as the replication target.</li> <li>Create the Volume Group and Assign Replication Policy This is where the magic happens!  You create the volume group on the system that you want be the source of the replication.  Then, add the volumes to be replicated into that group.  The volumes should be ones that you want to have consistency with each other (think Global Mirror session).  Then, you simply apply the replication policy to the volume group and replication starts automatically.  It takes care of creating the volumes on the target system, creating relationships, creating journal relationships, etc. </li> </ol> <p>That\u2019s it.  Once you have done these 5 steps, only have to do step 5 for subsequent replication.  Steps 1-4 are on-time setup only.</p> <p>The process of reversing replication is simple, but maybe not intuitive.  You correctly found Enable Access on the target system with pauses replication and makes the disk available on the target system (this is basically failoverpprc). The direction of replication when you restart it is simply based on which system you are logged into when you start replication after doing the enable access.  This is similar to how the failbackpprc command works on DS8k.  If you log into the target system and start replication from there, replication will be running in the reverse direction from the original (target --&gt; source).  If you log into the source system and start replication, it will resume from the original source --&gt; target direction.</p>"},{"location":"Storage/flashsystem/#port-planning","title":"Port Planning","text":""},{"location":"Storage/flashsystem/#port-allocation-table","title":"Port Allocation Table","text":"<p>Table copied from fs7300 docs</p> Adapter Port 4 ports 8 ports 12 ports 16 ports SAN Fabric Adapter 1 Port 1 Host and Storage Host and Storage Host and Storage Host and Storage A Adapter 1 Port 2 Host and Storage Host and Storage Host and Storage Host and Storage B Adapter 1 Port 3 Intracluster and Replication Intracluster Intracluster Intracluster A Adapter 1 Port 4 Intracluster and Replication Intracluster Intracluster Intracluster B Adapter 2 Port 1 - Host and Storage Host and Storage Host and Storage A Adapter 2 Port 2 - Host and Storage Host and Storage Host and Storage B Adapter 2 Port 3 - Intracluster or Replication Replication or Host and Storage Replication or Host and Storage A Adapter 2 Port 4 - Intracluster or Replication Replication or Host and Storage Replication or Host and Storage B Adapter 3 Port 1 - - Host and Storage Host and Storage A Adapter 3 Port 2 - - Host and Storage Host and Storage B Adapter 3 Port 3 - - Intracluster Intracluster A Adapter 3 Port 4 - - Intracluster Intracluster B Adapter 4 Port 1 - - - Host and Storage A Adapter 4 Port 2 - - - Host and Storage B Adapter 4 Port 3 - - - Replication or Host and Storage A Adapter 4 Port 4 - - - Replication or Host and Storage B localfcportmask 1100 11001100 or 00001100 110000001100 0000110000001100 - - remotefcportmask 1100 00000000 or 11000000 000011000000 1100000011000000 - - <p>Host refers to host objects defined in the system. Replication refers to nodes that are part of a different cluster. Storage refers to controller objects defined in the system if external storage is being used. Intracluster refers to nodes within the same cluster. The word \"and\" indicates that both types are used. The word \"or\" indicates that one of the options must be selected. If using replication, preference should be given to replication. If a receives more than 16 logins from another node, then it causes node error 860.</p> <p>You can ensure that no more than 16 logins are received by following these guidelines: Zone the SAN fabric to reduce the number of paths between the nodes. Apply a local Fibre Channel port mask (if the nodes are within the same system) or partner Fibre Channel port mask (if the nodes are in different systems) to reduce the number of ports that are being used for node-to-node communication. Provide a combination of the two (zoning and port masks). To avoid receiving node error 860 and to maximize performance on your system, follow these guidelines: For redundancy, use a minimum of two ports. If ports are being dedicated for different types of traffic, assign a minimum of two ports for each type of traffic. Within a system, up to 50% of the overall data that is transferred across the SAN is transmitted between the nodes. However, for read-intensive workloads, the figure is much less. Therefore, if ports are being dedicated for different types of traffic, assign between 1/4 and 1/2 of the overall ports for node-to-node communication within a system. For replication between systems, the connection between the systems is usually the bottleneck. Other than for redundancy, there is no point in having more SAN connections than there is bandwidth. For example, if two sites are connected with a 10 Gbps link, two 8 Gbps ports are sufficient. Systems usually are configured with two ports per node for replication traffic primarily for redundancy. For systems with larger numbers of nodes, it might be appropriate to have connections only from a subset of the nodes for replication to a remote system. The system automatically forwards replication traffic between local nodes so that all nodes can still participate in replication.</p>"},{"location":"Storage/flashsystem/#safguarded-copy-implementation","title":"Safguarded Copy Implementation","text":""},{"location":"Storage/flashsystem/#what-if-the-pools-fills-up","title":"What if the pools fills up?","text":"<p>There is a system wide setting that is set by using the <code>chsystem</code> command that will dictate what happens to safeguarded snapshots and their source volumes when you run out of space in the pool. You can check your current setting by using the command  <pre><code>lssystem | grep parent\n</code></pre></p> <p>There are two options for snapshot behavior if the pool fills up.  </p> <ul> <li>Default behavior is that the prod volume will go offline to protect the snapshots (similar to what happened when child pool filled up with the old safeguarded backups).     <pre><code>chsystem -snapshotpreserveparent no\n</code></pre></li> <li>Optional behavior is to keep the prod volumes online and have the oldest snapshot deleted:     <pre><code>chsystem -snapshotpreserveparent yes\n</code></pre> </li> </ul>"},{"location":"Storage/flashsystem/#spectrum-virtualize-remote-support-ip-addresses","title":"Spectrum Virtualize Remote Support IP Addresses","text":"<p>Firewall Configuration</p> <p>Any firewall holes that were created to allow connections to the current IP addresses must be updated with the new IP addresses.</p> Source Target Port Protocol Direction Existing Remote Support ServersThese firewall holes can be removed once new servers are configured and running The service IP address of every node or node canister 129.33.206.139 204.146.30.139 22 ssh Outbound only New Remote Support Servers The service IP address of every node or node canister 170.225.126.11170.225.126.12170.225.127.11170.225.127.12 22 ssh Outbound only"},{"location":"Storage/flashsystem/#ip-address-details","title":"IP address details","text":"<p>The new IP addresses for remote support are:</p> <ul> <li>170.225.126.11 - xrsc-front-srv-1.southdata.ibm.com</li> <li>170.225.126.12 - xrsc-front-srv-2.southdata.ibm.com</li> <li>170.225.127.11 - xrsc-front-srv-3.eastdata.ibm.com</li> <li>170.225.127.12 - xrsc-front-srv-4.eastdata.ibm.com</li> </ul>"},{"location":"Storage/flashsystem/#fix-central-code-download-firewall-configuration","title":"Fix Central Code Download - Firewall Configuration","text":"<p>IBM Announced in https://www.ibm.com/support/pages/node/6573219 that there would be a number of changes to some central support infrastructure.\u00a0</p> <p>Info</p> <ul> <li>Direct connection to Fix Central on port 22 was deprecated in V8.4.2.\u00a0 Systems running V8.4.2 or higher download code via esupport.ibm.com on port 443.</li> <li>The Fix Central DNS names were updated to point to the new IP addresses on 4 June 2022.\u00a0 Storage Virtualize devices use DNS to connect to Fix Central, therefore all connections will automatically be connecting to the new IP addresses.</li> </ul> Source Target Port Protocol Direction New Fix Central IP addresses The service IP address of every node or node canister 170.225.126.44 22 sftp Outbound only <p>Additional IBM Support IP address changes that do not affect Storage Virtualize products.</p> <p>The following notification was sent out relating to additional IP address changes.\u00a0 These changes do not affect Storage Virtualize products</p> <p>https://www.ibm.com/support/pages/node/6587781</p>"},{"location":"Storage/flashsystem/#support-procedures","title":"Support Procedures","text":""},{"location":"Storage/flashsystem/#export-config-xml-file","title":"Export Config XML File","text":"<ol> <li>Log into the GUI</li> <li>In the left menu, select Settings \u2192 Support </li> <li>Select Support Package and click on the Download Support Package option and choose Download Existing Package </li> <li>In the filter on the top right, enter <code>cron.xml</code> and hit enter.  Select the file, and click Download </li> <li>The file will be downloaded by your browser (typically to your Download folder).</li> </ol>"},{"location":"Storage/flashsystem/#wiping-a-system-to-returnresell","title":"Wiping a System to Return/Resell","text":""},{"location":"Storage/flashsystem/#erase-all-drives","title":"Erase All Drives","text":"<ol> <li>Delete all volumes and pools</li> <li> <p>Ensure all drives are in candidate use state</p> <pre><code>lsdrive\n</code></pre> </li> <li> <p>Erase all drives using this script</p> <pre><code>lsdrive -nohdr | while read -a line ; do chdrive -task erase ${line[0]} ; done\n</code></pre> </li> <li> <p>Verify erasure completion</p> <pre><code>lsdriveprogress\n</code></pre> </li> </ol>"},{"location":"Storage/flashsystem/#reset-system-to-factory-defaults","title":"Reset System to Factory Defaults","text":"<ol> <li>Delete all hosts, volumes, and pools</li> <li> <p>As superuser, ssh into the service IP node 1 and issue the following:</p> <pre><code>sainfo lsservicenodes\nsatask startservice -force &lt;node2_panel_name&gt;\nsatask startservice -force &lt;node1_panel_name&gt;\n</code></pre> </li> <li> <p>Log back into node 1 service IP and issue the following  (ensure both nodes are in service):</p> <pre><code>sainfo lsservicenodes \nsatask leavecluster -force &lt;node2_panel_name&gt;\nsatask leavecluster -force &lt;node1_panel_name&gt;\n</code></pre> </li> </ol> <p>Note</p> <p>The previous steps will reset the superuser password back to factory defaults.  Use passw0rd as the password going forward</p> <ol> <li> <p>Log back into node 1 service IP and issue the following (ensure \u2018cluster_id\u2019, \u2018cluster_name\u2019, \u2018node_name\u2019 are blank):</p> <pre><code>sainfo lsservicenodes \nsatask chvpd -resetclusterid &lt;node2_panel_name&gt;\nsatask chvpd -resetclusterid &lt;node1_panel_name&gt;\n</code></pre> </li> <li> <p>Reboot the nodes:</p> <pre><code>satask stopnode -reboot &lt;node2_panel_name&gt;\nsatask stopnode -reboot &lt;node1_panel_name&gt;\n</code></pre> </li> <li> <p>Log back into node 1 service IP and issue the following (both nodes should show 'node_status' as Candidate ):</p> <pre><code>sainfo lsservicenodes\n</code></pre> </li> </ol>"},{"location":"Storage/flashsystem/#scripts","title":"Scripts","text":""},{"location":"Storage/flashsystem/#determine-remote-copy-status","title":"Determine Remote Copy Status","text":""},{"location":"Storage/flashsystem/#objective","title":"Objective","text":"<p>This script will list the progress of all remote copy relationships defined on the system. \u00a0It will output the source volume name followed by the \u201cprogress\u201d percentage.\u00a0</p> <p>Note</p> <p>This is based on the OLD remote copy technology.  This should not be used for Policy Based Replication</p>"},{"location":"Storage/flashsystem/#script-syntax","title":"Script Syntax","text":"<pre><code>lsrcrelationship -nohdr | while read -a relationship\ndo echo \"Volume Name:  \"${relationship[5]}\nlsrcrelationship ${relationship[0]}|grep progress\necho\ndone\n</code></pre>"},{"location":"Storage/flashsystem/#example-output","title":"Example output:","text":"<pre><code>Volume Name:  Thor_0\nprogress 99 \n\nVolume Name:  Thor_1\nprogress 99\n\nVolume Name:  Thor_2\nprogress 99\n\nVolume Name:  Thor_3\nprogress 99\n\nVolume Name:  Thor_4\nprogress 99\n\nVolume Name:  Thor_5\nprogress 99\n\nVolume Name:  Thor_IASP1_0\nprogress 99\n\nVolume Name:  Thor_IASP1_1\nprogress 99\n\nVolume Name:  Thor_IASP1_2\nprogress 99\n\nVolume Name:  Thor_IASP1_3\nprogress 99\n\nVolume Name:  Thor_IASP1_4\nprogress 100\n</code></pre>"},{"location":"Storage/flashsystem/#validate-fibre-channel-host-connectivity-script","title":"Validate Fibre Channel Host Connectivity Script","text":""},{"location":"Storage/flashsystem/#objective_1","title":"Objective","text":"<p>This script will display all of the SAN fabric connectivity for each defined Host and indicate what port the host is connected through.</p>"},{"location":"Storage/flashsystem/#script-syntax_1","title":"Script Syntax","text":"<pre><code>svcinfo lshost -nohdr|while read -a host\ndo\n  printf \"\\n%-20s\\n\" ${host[1]}\n  svcinfo lsnode -nohdr |while read -a node\n  do\n  printf \"\\nnode %s \" ${node[1]}\n    for port in 1 2 3 4\n    do\n      printf \"-\"\n      svcinfo lsfabric -nohdr -host ${host[1]} |while read -a fabric\n      do\n        [[ ${fabric[2]} == ${node[0]} &amp;&amp; ${fabric[5]} == $port ]] &amp;&amp; printf \"\\b\\033[01;3%dm$port\\033[0m\" $((${#fabric[7]}/2-1))\n      done\n    done\n  done\n  printf \"\\n\"\ndone\n</code></pre>"},{"location":"Storage/flashsystem/#example-output_1","title":"Example output:","text":"<pre><code>esx20               \n\nnode node1 12--\nnode node2 12--\n\nesx21               \n\nnode node1 12--\nnode node2 12--\n\nesx22               \n\nnode node1 12--\nnode node2 12--\n\nesx23               \n\nnode node1 12--\nnode node2 12--\n\nesx24               \n\nnode node1 12--\nnode node2 12--\n\nrick-w2019          \n\nnode node1 --3-\nnode node2 --3-\n\nesx11               \n\nnode node1 12--\nnode node2 12--\n\ntest                \n\nnode node1 -2--\nnode node2 -2--\n</code></pre>"},{"location":"Storage/icos/","title":"IBM Cloud Object Storage","text":""},{"location":"Storage/scale/","title":"IBM Storage Scale","text":""},{"location":"Storage/scale/#documenation","title":"Documenation","text":"<ul> <li>Documentation Site</li> <li>IBM Spectrum Scale 5.1.0: Problem Determination Guide</li> </ul>"},{"location":"Storage/scale/#implementation","title":"Implementation","text":""},{"location":"Storage/scale/#cheat-sheet","title":"Cheat Sheet","text":"<ul> <li> <p>Ansible Toolkit directory: <code>/usr/lpp/mmfs/5.1.x.0/ansible-toolkit</code></p> </li> <li> <p>Add commands to environment path</p> <pre><code>        echo 'export PATH=$PATH:/usr/lpp/mmfs/bin' &gt; /etc/profile.d/mm.sh\n</code></pre> </li> </ul>"},{"location":"Storage/scale/#linux-stretch-cluster-installation","title":"Linux Stretch Cluster Installation","text":"<ol> <li>Set adapter IP Address  </li> <li>Set hostname  </li> <li> <p>Set DNS servers  </p> <pre><code>vi /etc/resolv.conf\n</code></pre> </li> <li> <p>Attach Redhat Subscription  </p> <pre><code>subscription-manager register\nsubscription-manager attach --auto\n</code></pre> </li> <li> <p>Download the appropriate version of Spectrum Scale   </p> </li> <li>Copy the self-extracting product image to a local directory (We use: <code>/home/install/scale</code>)   </li> <li> <p>Make the file executible if needed   </p> <pre><code>chmod Spectrum_Scale_Standard-5.1.7.x-x86_64-Linux-install\n</code></pre> </li> <li> <p>Extract    </p> <pre><code>tar -xvf Scale_adv_5.1.7_ppc64le.tar\n</code></pre> </li> </ol>"},{"location":"Storage/scale/#adding-a-node-to-the-cluster","title":"Adding a Node to the Cluster","text":"<ol> <li>Download the appropriate version of Spectrum Scale   </li> <li>Copy the self-extracting product image to a local directory (We use: <code>/home/install/scale</code>)   </li> <li> <p>Make the file executible if needed   </p> <pre><code>chmod Spectrum_Scale_Standard-5.1.7.x-x86_64-Linux-install\n</code></pre> </li> <li> <p>Extract    </p> <pre><code>tar -xvf Scale_adv_5.1.7_ppc64le.tar\n</code></pre> </li> </ol>"},{"location":"Storage/scale/#enable-smb-protocol","title":"Enable SMB Protocol","text":""},{"location":"Storage/scale/#install-prerequisite-packages","title":"Install prerequisite packages","text":"<p>Info</p> <pre><code>Do this on EACH CES node!\n</code></pre> <ol> <li> <p>Install the gdb package</p> <pre><code>dnf install gdb\n</code></pre> </li> <li> <p>Change to the smb_rpms directory</p> <pre><code>cd /usr/lpp/mmfs/5.1.7.0/smb_rpms/rhel8\n</code></pre> </li> <li> <p>Install the RPMs</p> <pre><code>rpm -Uvh gpfs.smb-4.16.8_gpfs_7-1.el8.ppc64le.rpm\n</code></pre> </li> <li> <p>Enable the SMB service</p> <pre><code>mmces service enable smb\n</code></pre> </li> </ol>"},{"location":"Storage/scale/#setup-file-access-authentication-with-active-directory","title":"Setup File Access Authentication with Active Directory","text":"<ol> <li> <pre><code>mmuserauth service create  --type ad --data-access-method file --netbios-name specscale --user-name adUser --idmap-role master --servers myAdserver --idmap-range-size 1000000 --idmap-range 10000000-299999999 --unixmap-domains 'DOMAIN(5000-20000:win)'\n</code></pre> </li> </ol>"},{"location":"Storage/ts4500/","title":"IBM TS4500 Tape Library","text":""},{"location":"Storage/ts4500/#tssc","title":"TSSC","text":"<p>To log into the TSSC from the on-prem console Alt+Shift+D service/service</p>"}]}